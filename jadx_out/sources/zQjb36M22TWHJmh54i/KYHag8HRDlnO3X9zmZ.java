package zQjb36M22TWHJmh54i;

import android.content.Context;
import android.util.Base64OutputStream;
import java.io.ByteArrayOutputStream;
import java.util.Collection;
import java.util.List;
import java.util.Set;
import java.util.concurrent.Callable;
import java.util.concurrent.Executor;
import java.util.zip.GZIPOutputStream;
import org.json.JSONArray;
import org.json.JSONObject;
import zQjb36M22TWHJmh54i.Acstmh57AKoSEkEFNJ;
import zWzrlx9vIdLp7FoEMD.jCtUeU2YI1poCxWcjm;

/* loaded from: classes.dex */
public class KYHag8HRDlnO3X9zmZ implements pbVGzGjWvY2LDXC8vo, Acstmh57AKoSEkEFNJ {

    /* renamed from: HJFh0TGMpafqLE9haL, reason: collision with root package name */
    public final xt9LcS8xZRgoStfDrh.s3fjYDxWOUexjjVgyA f7346HJFh0TGMpafqLE9haL;

    /* renamed from: husNiw3snxdgZPAGJm, reason: collision with root package name */
    public final Executor f7347husNiw3snxdgZPAGJm;

    /* renamed from: lEeR5KfoEr4xU5yHH7, reason: collision with root package name */
    public final xt9LcS8xZRgoStfDrh.s3fjYDxWOUexjjVgyA f7348lEeR5KfoEr4xU5yHH7;

    /* renamed from: s3fjYDxWOUexjjVgyA, reason: collision with root package name */
    public final Context f7349s3fjYDxWOUexjjVgyA;

    /* renamed from: zZKhbgvUfsK4AEX3r0, reason: collision with root package name */
    public final Set f7350zZKhbgvUfsK4AEX3r0;

    public KYHag8HRDlnO3X9zmZ(final Context context, final String str, Set set, xt9LcS8xZRgoStfDrh.s3fjYDxWOUexjjVgyA s3fjydxwouexjjvgya, Executor executor) {
        this(new xt9LcS8xZRgoStfDrh.s3fjYDxWOUexjjVgyA() { // from class: zQjb36M22TWHJmh54i.HJFh0TGMpafqLE9haL
            @Override // xt9LcS8xZRgoStfDrh.s3fjYDxWOUexjjVgyA
            public final Object get() {
                return KYHag8HRDlnO3X9zmZ.Acstmh57AKoSEkEFNJ(context, str);
            }
        }, set, executor, s3fjydxwouexjjvgya, context);
    }

    public static /* synthetic */ zaq8hOURtfwbcX17cG Acstmh57AKoSEkEFNJ(Context context, String str) {
        return new zaq8hOURtfwbcX17cG(context, str);
    }

    public static /* synthetic */ KYHag8HRDlnO3X9zmZ IPyIQcaNa8aB7drBED(jCtUeU2YI1poCxWcjm jctueu2yi1pocxwcjm, zWzrlx9vIdLp7FoEMD.zZKhbgvUfsK4AEX3r0 zzkhbgvufsk4aex3r0) {
        return new KYHag8HRDlnO3X9zmZ((Context) zzkhbgvufsk4aex3r0.lEeR5KfoEr4xU5yHH7(Context.class), ((sKw6Jz5uGcQ479KwIW.husNiw3snxdgZPAGJm) zzkhbgvufsk4aex3r0.lEeR5KfoEr4xU5yHH7(sKw6Jz5uGcQ479KwIW.husNiw3snxdgZPAGJm.class)).hoXrIDAFrSwfShk8da(), zzkhbgvufsk4aex3r0.zZKhbgvUfsK4AEX3r0(TCyPEKSzIyweCN5yp1.class), zzkhbgvufsk4aex3r0.HJFh0TGMpafqLE9haL(Tn7MuV14fPMb1UrB5h.pbVGzGjWvY2LDXC8vo.class), (Executor) zzkhbgvufsk4aex3r0.TCyPEKSzIyweCN5yp1(jctueu2yi1pocxwcjm));
    }

    public static zWzrlx9vIdLp7FoEMD.HJFh0TGMpafqLE9haL TCyPEKSzIyweCN5yp1() {
        final jCtUeU2YI1poCxWcjm jctueu2yi1pocxwcjmLEeR5KfoEr4xU5yHH7 = jCtUeU2YI1poCxWcjm.lEeR5KfoEr4xU5yHH7(dvmHGYHwlE2ean7ktb.lEeR5KfoEr4xU5yHH7.class, Executor.class);
        return zWzrlx9vIdLp7FoEMD.HJFh0TGMpafqLE9haL.zZKhbgvUfsK4AEX3r0(KYHag8HRDlnO3X9zmZ.class, pbVGzGjWvY2LDXC8vo.class, Acstmh57AKoSEkEFNJ.class).s3fjYDxWOUexjjVgyA(zWzrlx9vIdLp7FoEMD.zaq8hOURtfwbcX17cG.Acstmh57AKoSEkEFNJ(Context.class)).s3fjYDxWOUexjjVgyA(zWzrlx9vIdLp7FoEMD.zaq8hOURtfwbcX17cG.Acstmh57AKoSEkEFNJ(sKw6Jz5uGcQ479KwIW.husNiw3snxdgZPAGJm.class)).s3fjYDxWOUexjjVgyA(zWzrlx9vIdLp7FoEMD.zaq8hOURtfwbcX17cG.T9PhQIpGRhE4yZDm1C(TCyPEKSzIyweCN5yp1.class)).s3fjYDxWOUexjjVgyA(zWzrlx9vIdLp7FoEMD.zaq8hOURtfwbcX17cG.e54J8UWNHWALQNixXM(Tn7MuV14fPMb1UrB5h.pbVGzGjWvY2LDXC8vo.class)).s3fjYDxWOUexjjVgyA(zWzrlx9vIdLp7FoEMD.zaq8hOURtfwbcX17cG.Z9WdNiOsPR0y54zHW4(jctueu2yi1pocxwcjmLEeR5KfoEr4xU5yHH7)).husNiw3snxdgZPAGJm(new zWzrlx9vIdLp7FoEMD.TCyPEKSzIyweCN5yp1() { // from class: zQjb36M22TWHJmh54i.s3fjYDxWOUexjjVgyA
            @Override // zWzrlx9vIdLp7FoEMD.TCyPEKSzIyweCN5yp1
            public final Object lEeR5KfoEr4xU5yHH7(zWzrlx9vIdLp7FoEMD.zZKhbgvUfsK4AEX3r0 zzkhbgvufsk4aex3r0) {
                return KYHag8HRDlnO3X9zmZ.IPyIQcaNa8aB7drBED(jctueu2yi1pocxwcjmLEeR5KfoEr4xU5yHH7, zzkhbgvufsk4aex3r0);
            }
        }).zZKhbgvUfsK4AEX3r0();
    }

    public final /* synthetic */ Void Z9WdNiOsPR0y54zHW4() {
        synchronized (this) {
            ((zaq8hOURtfwbcX17cG) this.f7348lEeR5KfoEr4xU5yHH7.get()).Z9WdNiOsPR0y54zHW4(System.currentTimeMillis(), ((Tn7MuV14fPMb1UrB5h.pbVGzGjWvY2LDXC8vo) this.f7346HJFh0TGMpafqLE9haL.get()).lEeR5KfoEr4xU5yHH7());
        }
        return null;
    }

    public JXsqbvi9UKxeF3HXpU.pbVGzGjWvY2LDXC8vo e54J8UWNHWALQNixXM() {
        return this.f7350zZKhbgvUfsK4AEX3r0.size() <= 0 ? JXsqbvi9UKxeF3HXpU.e54J8UWNHWALQNixXM.husNiw3snxdgZPAGJm(null) : OUd9THiLjZndMj0qdF.TCyPEKSzIyweCN5yp1.lEeR5KfoEr4xU5yHH7(this.f7349s3fjYDxWOUexjjVgyA) ^ true ? JXsqbvi9UKxeF3HXpU.e54J8UWNHWALQNixXM.husNiw3snxdgZPAGJm(null) : JXsqbvi9UKxeF3HXpU.e54J8UWNHWALQNixXM.HJFh0TGMpafqLE9haL(this.f7347husNiw3snxdgZPAGJm, new Callable() { // from class: zQjb36M22TWHJmh54i.husNiw3snxdgZPAGJm
            @Override // java.util.concurrent.Callable
            public final Object call() {
                return this.f7351lEeR5KfoEr4xU5yHH7.Z9WdNiOsPR0y54zHW4();
            }
        });
    }

    @Override // zQjb36M22TWHJmh54i.pbVGzGjWvY2LDXC8vo
    public JXsqbvi9UKxeF3HXpU.pbVGzGjWvY2LDXC8vo lEeR5KfoEr4xU5yHH7() {
        return OUd9THiLjZndMj0qdF.TCyPEKSzIyweCN5yp1.lEeR5KfoEr4xU5yHH7(this.f7349s3fjYDxWOUexjjVgyA) ^ true ? JXsqbvi9UKxeF3HXpU.e54J8UWNHWALQNixXM.husNiw3snxdgZPAGJm("") : JXsqbvi9UKxeF3HXpU.e54J8UWNHWALQNixXM.HJFh0TGMpafqLE9haL(this.f7347husNiw3snxdgZPAGJm, new Callable() { // from class: zQjb36M22TWHJmh54i.zZKhbgvUfsK4AEX3r0
            @Override // java.util.concurrent.Callable
            public final Object call() {
                return this.f7355lEeR5KfoEr4xU5yHH7.pbVGzGjWvY2LDXC8vo();
            }
        });
    }

    public final /* synthetic */ String pbVGzGjWvY2LDXC8vo() {
        String string;
        synchronized (this) {
            try {
                zaq8hOURtfwbcX17cG zaq8hourtfwbcx17cg = (zaq8hOURtfwbcX17cG) this.f7348lEeR5KfoEr4xU5yHH7.get();
                List listHJFh0TGMpafqLE9haL = zaq8hourtfwbcx17cg.HJFh0TGMpafqLE9haL();
                zaq8hourtfwbcx17cg.s3fjYDxWOUexjjVgyA();
                JSONArray jSONArray = new JSONArray();
                for (int i = 0; i < listHJFh0TGMpafqLE9haL.size(); i++) {
                    sTkWmhpZ5b1ArQIw4K stkwmhpz5b1arqiw4k = (sTkWmhpZ5b1ArQIw4K) listHJFh0TGMpafqLE9haL.get(i);
                    JSONObject jSONObject = new JSONObject();
                    jSONObject.put("agent", stkwmhpz5b1arqiw4k.HJFh0TGMpafqLE9haL());
                    jSONObject.put("dates", new JSONArray((Collection) stkwmhpz5b1arqiw4k.s3fjYDxWOUexjjVgyA()));
                    jSONArray.put(jSONObject);
                }
                JSONObject jSONObject2 = new JSONObject();
                jSONObject2.put("heartbeats", jSONArray);
                jSONObject2.put("version", "2");
                ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();
                Base64OutputStream base64OutputStream = new Base64OutputStream(byteArrayOutputStream, 11);
                try {
                    GZIPOutputStream gZIPOutputStream = new GZIPOutputStream(base64OutputStream);
                    try {
                        gZIPOutputStream.write(jSONObject2.toString().getBytes("UTF-8"));
                        gZIPOutputStream.close();
                        base64OutputStream.close();
                        string = byteArrayOutputStream.toString("UTF-8");
                    } finally {
                    }
                } finally {
                }
            } catch (Throwable th) {
                throw th;
            }
        }
        return string;
    }

    @Override // zQjb36M22TWHJmh54i.Acstmh57AKoSEkEFNJ
    public synchronized Acstmh57AKoSEkEFNJ.lEeR5KfoEr4xU5yHH7 s3fjYDxWOUexjjVgyA(String str) {
        long jCurrentTimeMillis = System.currentTimeMillis();
        zaq8hOURtfwbcX17cG zaq8hourtfwbcx17cg = (zaq8hOURtfwbcX17cG) this.f7348lEeR5KfoEr4xU5yHH7.get();
        if (!zaq8hourtfwbcx17cg.pbVGzGjWvY2LDXC8vo(jCurrentTimeMillis)) {
            return Acstmh57AKoSEkEFNJ.lEeR5KfoEr4xU5yHH7.NONE;
        }
        zaq8hourtfwbcx17cg.TCyPEKSzIyweCN5yp1();
        return Acstmh57AKoSEkEFNJ.lEeR5KfoEr4xU5yHH7.GLOBAL;
    }

    public KYHag8HRDlnO3X9zmZ(xt9LcS8xZRgoStfDrh.s3fjYDxWOUexjjVgyA s3fjydxwouexjjvgya, Set set, Executor executor, xt9LcS8xZRgoStfDrh.s3fjYDxWOUexjjVgyA s3fjydxwouexjjvgya2, Context context) {
        this.f7348lEeR5KfoEr4xU5yHH7 = s3fjydxwouexjjvgya;
        this.f7350zZKhbgvUfsK4AEX3r0 = set;
        this.f7347husNiw3snxdgZPAGJm = executor;
        this.f7346HJFh0TGMpafqLE9haL = s3fjydxwouexjjvgya2;
        this.f7349s3fjYDxWOUexjjVgyA = context;
    }
}
